
> V8是一个由Google开发并用于Chromium和Node.js等项目的Javascript引擎。它是一个高性能的引擎，可以在浏览器中快速地执行Javascript代码。

### V8引擎简易原理
1. 储存方式：V8引擎使用堆空间（heap）来储存Javascript对象，所有的对象都是分配在堆上的。V8引擎的堆空间分为新生代和老生代两个区域，使用不同的垃圾回收策略，以达到更有效率的内存管理。

2. JIT编译器：V8引擎使用Just-In-Time（JIT）编译器来提高执行效率。当Javascript代码被执行时，V8引擎首先会将代码解析成抽象语法树（AST），然后使用解释器将AST转化成字节码。在代码重复执行的情况下，V8引擎会将字节码编译成本地机器码，以提高代码的执行速度。

3. 内联缓存：V8引擎使用内联缓存来提高属性查找的效率。内联缓存是V8引擎在执行对象的属性查找时，预先缓存对象的类型和属性的偏移值，使得下一次查找同一个对象的同一个属性的时候可以直接使用缓存，避免了反复的查找过程。

4. 垃圾回收：V8引擎使用垃圾回收算法来管理堆内存。它将堆内存分为新生代和老生代两个区域，并使用不同的垃圾回收算法来处理两个区域的内存释放。在新生代区域，V8引擎使用Scavenge算法，它将堆空间一分为二，一个区域称为From区域，另一个称为To区域。当From区域的内存达到一定的限制后，V8引擎会将From区域中的对象经过垃圾回收筛选，存活的对象复制到To区域，并将From区域全部清空。而在老生代区域，V8引擎使用Mark-Sweep和Mark-Compact等算法，对存活的对象进行标记和移动，以达到内存整理的效果。

### V8垃圾回收机制
> V8 引擎中的垃圾回收机制负责自动管理内存的分配和释放，以确保程序运行期间不会出现内存泄漏或垃圾堆积的问题。

V8 引擎的垃圾回收机制基于代际假说和分代回收的原理。它将内存分为新生代（young generation）和老生代（old generation）两个代。新生代用于存放新创建的对象，老生代用于存放经过一定时间仍然存活的对象。
下面是V8 引擎中的垃圾回收机制的一般流程：
1. 新生代垃圾回收：V8 将新生代内存空间分为两个部分：From 空间和To 空间。新创建的对象首先被分配到From 空间，当From 空间满时，会触发垃圾回收过程。回收过程中，V8 首先进行标记操作，标记活跃的对象，然后将这些对象复制到To 空间，同时进行压缩等操作。最后，From 空间和To 空间的角色互换，完成垃圾回收。
2. 老生代垃圾回收：老生代中的对象由于存活时间较长，垃圾回收的成本较高。V8 使用标记-清除（mark-sweep）和标记-压缩（mark-compact）两种算法进行老生代的垃圾回收。标记-清除算法首先进行标记操作，标记出活跃的对象，然后清除未标记的对象。标记-压缩算法在清除未标记的对象后，将存活的对象压缩到内存的一端，从而减少内存碎片化。
3. 增量标记：为了降低垃圾回收对程序执行的影响，V8 引擎使用增量标记算法。增量标记允许垃圾回收过程与程序执行交替进行，每次执行一小部分的标记操作，减少了垃圾回收对程序的中断时间。